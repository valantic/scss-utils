@use 'sass:meta';
@use 'sass:string';

/// Utility for consistent, multi-line error handling.
///
/// Prefixes errors with `@valantic-scss-utils` and includes structured formatting.
///
/// @param {string} $function-name The name of the function or mixin throwing the error.
/// @param {string} $message The error message to display.
///
/// @return An error string for the output.
@function throw-error($function-name, $message) {
  $errorPrefix: 'ðŸš¨ðŸš¨ SCSS-ERROR: @valantic-scss-utils ðŸš¨ðŸš¨ \n';

  //@debug $errorPrefix;
  @warn $errorPrefix;

  // Validate inputs
  @if meta.type-of($function-name) != 'string' {
    @return "#{$errorPrefix}" +
            "Helper Function: throw-error\n -- Property $function-name must be a string. Received: #{meta.type-of($function-name)}.\n";
  }

  @if meta.type-of($message) != 'string' {
    @return "#{$errorPrefix}" +
            "Helper Function: throw-error\n -- Property $message must be a string. Received: #{meta.type-of($message)}.\n";
  }

  // Throw the multi-line error
  @return "#{$errorPrefix}" +
          "Triggerd from: #{$function-name} \n -- #{string.unquote($message)}. \n";
}
